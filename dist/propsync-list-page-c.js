document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".accordion_list"),r=Array.from(document.querySelectorAll(".accordion_component .card-wrapper")),t=document.querySelector(".accordion_accordion");if(!e||!t||0===r.length){console.error("Required elements not found. Make sure .accordion_list, .accordion_accordion, and .card-wrapper elements exist.");const e=document.querySelector(".accordion_component");return void(e&&(e.style.display="none"))}const o={};r.forEach((e=>{const r=e.querySelector(".bedroom-card-value"),t=e.querySelector(".price-min-card-value");if(r&&t){const n=r.textContent.trim(),c=parseInt(t.textContent.trim().replace(/[^0-9]/g,""),10),a=function(e){const r=parseInt(e,10);return isNaN(r)?"Unknown":0===r?"Studio":1===r?"1 Bedroom":`${r} Bedroom`}(n),i=parseInt(n,10);if(isNaN(c))return void console.warn("Could not parse price for a card in type:",a,e);o[a]||(o[a]={cards:[],minPrice:1/0,numericBedValue:isNaN(i)?1/0:i}),o[a].cards.push(e),o[a].minPrice=Math.min(o[a].minPrice,c)}else console.warn("Skipping card, missing bed or price element:",e)}));const n=Object.keys(o).sort(((e,r)=>{const t=o[e],n=o[r];return t.numericBedValue-n.numericBedValue}));e.innerHTML="",n.forEach((r=>{const n=o[r];if(n.cards.length>0){const o=t.cloneNode(!0),c=o.querySelector(".accordion_question"),a=o.querySelector(".accordion_answer"),i=o.querySelector(".floorplan-accordian-text"),s=o.querySelector(".floorplan-collection-list");if(!(c&&a&&i&&s))return void console.error("Template accordion structure is missing required elements.");const l=`${r} Starting at $${n.minPrice} -- Number of ${n.cards.length} Floorplans`;i.textContent=l;const d=o.querySelector(".bedroom-text");d&&(d.textContent=r),s.innerHTML="",n.cards.forEach((e=>{s.appendChild(e)})),a.style.maxHeight="0px",a.style.opacity="0",a.style.overflow="hidden",o.classList.remove("active"),e.appendChild(o)}})),e.addEventListener("click",(function(e){const r=e.target.closest(".accordion_question");if(!r)return;const t=r.closest(".accordion_accordion");if(!t)return;const o=t.querySelector(".accordion_answer"),n=r.querySelector(".accordion_icon-wrapper");if(!o||!n)return;t.classList.contains("active")?(o.style.maxHeight="0px",o.style.opacity="0",n.style.transform="rotate(0deg)",t.classList.remove("active")):(t.classList.add("active"),o.style.maxHeight=o.scrollHeight+"px",o.style.opacity="1",n.style.transform="rotate(45deg)")}));document.querySelectorAll(".card-wrapper").forEach((function(e){const r=e.querySelector(".sqr-min-card-value"),t=e.querySelector(".sqr-max-card-value"),o=e.querySelector(".sqr-spacer");r&&t&&o&&r.textContent===t.textContent&&(o.style.display="none",t.style.display="none");const n=e.querySelector(".price-min-card-value"),c=e.querySelector(".price-max-card-value"),a=e.querySelector(".price-spacer"),i=e.querySelector(".price-max-dollar"),s=e.querySelector(".startingat");n&&c&&a&&n.textContent===c.textContent&&(a.style.display="none",c.style.display="none",i&&(i.style.display="none"),s&&(s.style.display="inline"))}))}));