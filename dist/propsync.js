document.addEventListener("DOMContentLoaded",(()=>{const formatNumber=e=>null==e||isNaN(e)?"":Math.round(e).toLocaleString(),parseVal=(e,t,r=!1)=>{const n=e.querySelector(t);if(!n||!n.textContent)return null;const o=n.textContent.trim().replace(/[^0-9.]+/g,"");if(""===o)return null;const l=r?parseFloat(o):parseInt(o,10);return isNaN(l)?null:l};document.querySelectorAll("[applylink]").forEach((function(e){const t=e.getAttribute("applylink");t&&e.setAttribute("href",t)}));[".price-min",".price-max",".price-min-card-value",".price-max-card-value"].forEach((e=>{document.querySelectorAll(e).forEach((t=>{const r=parseVal(t.parentElement,e);null!==r&&r>=0&&(t.textContent=formatNumber(r))}))})),(()=>{const e=document.querySelector(".sqr-min-card-value"),t=document.querySelector(".sqr-max-card-value"),r=document.querySelector(".sqr-spacer");e&&t&&r&&e.textContent===t.textContent&&(r.style.display="none",t.style.display="none");const n=document.querySelector(".price-min-card-value"),o=document.querySelector(".price-max-card-value"),l=document.querySelector(".price-spacer"),c=document.querySelector(".startingat");n&&o&&l&&n.textContent===o.textContent&&(l.style.display="none",o.style.display="none",c&&(c.style.display="inline"));const a=document.querySelector(".floorplan-slider");if(!a)return;const s=a.querySelector(".w-dyn-items"),i=a.querySelectorAll(".w-dyn-item"),u=a.querySelector(".slider-arrow-left_small"),d=a.querySelector(".slider-arrow-right_small");if(!(s&&i.length&&u&&d))return;let y,m=0;const p=i.length,moveSlide=e=>{m="right"===e?(m+1)%p:(m-1+p)%p,(e=>{m=e;const t=100/p*-m;s.style.transform=`translateX(${t}%)`})(m),resetAutoSlide()},startAutoSlide=()=>{y=setInterval((()=>moveSlide("right")),2e3)},resetAutoSlide=()=>{clearInterval(y),startAutoSlide()};s.style.display="flex",s.style.transition="transform 0.5s ease-in-out",s.style.width=100*p+"%",i.forEach((e=>{e.style.flex="1",e.style.width=100/p+"%"})),startAutoSlide(),u.addEventListener("click",(()=>moveSlide("left"))),d.addEventListener("click",(()=>moveSlide("right")))})(),(()=>{const e=document.querySelectorAll(".card-wrapper"),t=document.querySelector(".button-filter"),r=document.querySelector(".button-reset");if(!e.length||!t||!r)return;const n=document.querySelectorAll(".bedroom-wrapper"),o=document.querySelectorAll('.bedroom-wrapper input[type="checkbox"]'),l=document.querySelector(".price-range"),c=document.querySelector(".sqr-range"),a=document.querySelector('[fs-cmsfilter-element="results-count"]');let s=!1,i=1/0,u=-1/0,d=1/0,y=-1/0;const m=new Set,p=[];e.forEach((e=>{const t=parseVal(e,".bedroom-card-value"),r=parseVal(e,".price-min-card-value"),n=parseVal(e,".price-max-card-value"),o=parseVal(e,".sqr-min-card-value"),l=parseVal(e,".sqr-max-card-value");if(null!==r&&r<0)return void(e.style.display="none");const c={element:e,bed:t,priceMin:r,priceMax:n,sqrMin:o,sqrMax:l};p.push(c),null!==c.bed&&m.add(c.bed),null!==c.priceMin&&(i=Math.min(i,c.priceMin)),null!==c.priceMax&&(u=Math.max(u,c.priceMax)),null!==c.sqrMin&&(d=Math.min(d,c.sqrMin)),null!==c.sqrMax&&(y=Math.max(y,c.sqrMax))})),i===1/0&&(i=0),(u===-1/0||u<i)&&(u=Math.max(1e3,i)),d===1/0&&(d=0),(y===-1/0||y<d)&&(y=Math.max(2e3,d));const setupRangeSlider=(e,t,r)=>{if(!t)return;const n=t.querySelector(`.${e}-min-handler`),o=t.querySelector(`.${e}-max-handler`),l=t.querySelector(`.${e}-range-bar`),c=t.querySelector(`.${e}-min`),a=t.querySelector(`.${e}-max`),i=n?.closest(".rangeslider_track");if(!(n&&o&&l&&c&&a&&i))return;let u,d,y,m,p,q,f=!1,x=!1;const updateSliderVisuals=()=>{const e=parseFloat(n.style.left)||0,s=parseFloat(o.style.left)||100;l.style.left=`${e}%`,l.style.width=s-e+"%";const i=parseFloat(t.dataset.min),u=parseFloat(t.dataset.max);if(!isNaN(i)&&!isNaN(u)){const t=i+e/100*(u-i),n=i+s/100*(u-i);c.textContent=r(t),a.textContent=r(n)}},onDragStart=(e,r)=>{if(s)return;s=!0,e.preventDefault();const o=r===n;if(f=o,x=!o,p=parseFloat(t.dataset.min),q=parseFloat(t.dataset.max),isNaN(p)||isNaN(q))return;u=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX,d=parseFloat(r.style.left)||(o?0:100);const l=i.getBoundingClientRect();y=l.width,m=l.left,y<=0||(document.addEventListener("mousemove",onDragging),document.addEventListener("touchmove",onDragging,{passive:!1}),document.addEventListener("mouseup",onDragEnd),document.addEventListener("touchend",onDragEnd))},onDragging=e=>{if(!f&&!x)return;e.type.startsWith("touch")&&e.preventDefault();const t=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX;let r=d+(t-u)/y*100;r=Math.max(0,Math.min(100,r));const l=parseFloat(f?o.style.left:n.style.left)||(f?100:0);f?(r=Math.min(r,l),n.style.left=`${r}%`):(r=Math.max(r,l),o.style.left=`${r}%`),updateSliderVisuals()},onDragEnd=()=>{(f||x)&&(s=!1,f=!1,x=!1,document.removeEventListener("mousemove",onDragging),document.removeEventListener("touchmove",onDragging),document.removeEventListener("mouseup",onDragEnd),document.removeEventListener("touchend",onDragEnd))};n.addEventListener("mousedown",(e=>onDragStart(e,n))),n.addEventListener("touchstart",(e=>onDragStart(e,n)),{passive:!0}),o.addEventListener("mousedown",(e=>onDragStart(e,o))),o.addEventListener("touchstart",(e=>onDragStart(e,o)),{passive:!0}),updateSliderVisuals()};if(l){const e=l.querySelector(".price-min"),t=l.querySelector(".price-max");if(e&&t){e.textContent=formatNumber(i),t.textContent=formatNumber(u),l.dataset.min=i,l.dataset.max=u;const r=l.querySelector(".price-min-handler"),n=l.querySelector(".price-max-handler"),o=l.querySelector(".price-range-bar");r&&(r.style.left="0%"),n&&(n.style.left="100%"),o&&(o.style.left="0%",o.style.width="100%")}setupRangeSlider("price",l,formatNumber)}if(c){const e=c.querySelector(".sqr-min"),t=c.querySelector(".sqr-max");if(e&&t){e.textContent=formatNumber(d),t.textContent=formatNumber(y),c.dataset.min=d,c.dataset.max=y;const r=c.querySelector(".sqr-min-handler"),n=c.querySelector(".sqr-max-handler"),o=c.querySelector(".sqr-range-bar");r&&(r.style.left="0%"),n&&(n.style.left="100%"),o&&(o.style.left="0%",o.style.width="100%")}setupRangeSlider("sqr",c,formatNumber)}n.forEach((e=>{const t=e.querySelector(".bedroom-value"),r=t?parseInt(t.textContent.trim(),10):NaN;e.style.display=!isNaN(r)&&m.has(r)?"":"none"}));t.addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=Array.from(o).filter((e=>e.checked)).map((e=>{const t=e.closest(".bedroom-wrapper"),r=t?.querySelector(".bedroom-value");return r?parseInt(r.textContent.trim(),10):NaN})).filter((e=>!isNaN(e))),t=l&&parseFloat(l.querySelector(".price-min")?.textContent.replace(/[^0-9.]+/g,""))||i,r=l&&parseFloat(l.querySelector(".price-max")?.textContent.replace(/[^0-9.]+/g,""))||u,n=c&&parseFloat(c.querySelector(".sqr-min")?.textContent.replace(/[^0-9.]+/g,""))||d,s=c&&parseFloat(c.querySelector(".sqr-max")?.textContent.replace(/[^0-9.]+/g,""))||y;let m=0;p.forEach((o=>{let l=!0;e.length>0&&(null===o.bed||!e.includes(o.bed))&&(l=!1),l&&null!==o.priceMax&&null!==o.priceMin&&(o.priceMax<t||o.priceMin>r)&&(l=!1),l&&null!==o.sqrMax&&null!==o.sqrMin&&(o.sqrMax<n||o.sqrMin>s)&&(l=!1),o.element.style.display=l?"":"none",l&&m++})),a&&(a.textContent=m)})()})),r.addEventListener("click",(e=>{e.preventDefault(),(()=>{if(o.forEach((e=>e.checked=!1)),l){const e=l.querySelector(".price-min-handler"),t=l.querySelector(".price-max-handler"),r=l.querySelector(".price-range-bar"),n=l.querySelector(".price-min"),o=l.querySelector(".price-max");e&&(e.style.left="0%"),t&&(t.style.left="100%"),r&&(r.style.left="0%",r.style.width="100%"),n&&(n.textContent=formatNumber(i)),o&&(o.textContent=formatNumber(u))}if(c){const e=c.querySelector(".sqr-min-handler"),t=c.querySelector(".sqr-max-handler"),r=c.querySelector(".sqr-range-bar"),n=c.querySelector(".sqr-min"),o=c.querySelector(".sqr-max");e&&(e.style.left="0%"),t&&(t.style.left="100%"),r&&(r.style.left="0%",r.style.width="100%"),n&&(n.textContent=formatNumber(d)),o&&(o.textContent=formatNumber(y))}p.forEach((e=>{e.element.style.display=""})),a&&(a.textContent=p.length)})()})),a&&(a.textContent=p.length)})(),(()=>{const e=document.querySelector(".accordion_list"),t=document.querySelector(".accordion_accordion"),r=Array.from(document.querySelectorAll(".accordion_component .card-wrapper"));if(!e||!t||!r.length)return;const n={};r.forEach((e=>{const t=e.querySelector(".bedroom-card-value"),r=e.querySelector(".price-min-card-value");if(t&&r){const o=t.textContent.trim(),l=parseInt(r.textContent.trim().replace(/[^0-9]/g,""),10);if(l<0)return void(e.style.display="none");const c=(e=>{const t=parseInt(e,10);return isNaN(t)?"Unknown":0===t?"Studio":1===t?"1 Bedroom":`${t} Bedroom`})(o),a=parseInt(o,10);if(isNaN(l))return;n[c]||(n[c]={cards:[],minPrice:1/0,numericBedValue:isNaN(a)?1/0:a}),n[c].cards.push(e),n[c].minPrice=Math.min(n[c].minPrice,l)}}));const o=Object.keys(n).sort(((e,t)=>n[e].numericBedValue-n[t].numericBedValue));e.innerHTML="",o.forEach((r=>{const o=n[r];if(o.cards.length>0){const n=t.cloneNode(!0),c=n.querySelector(".accordion_question"),a=n.querySelector(".accordion_answer"),s=n.querySelector(".floorplan-accordian-text"),i=n.querySelector(".floorplan-collection-list");if(!(c&&a&&s&&i))return;const u=`${r} Starting at ${l=o.minPrice,null==l||isNaN(l)?"":"$"+formatNumber(l)} -- Number of ${o.cards.length} Floorplans`;s.textContent=u;const d=n.querySelector(".bedroom-text");d&&(d.textContent=r),i.innerHTML="",o.cards.forEach((e=>{i.appendChild(e)})),a.style.maxHeight="0px",a.style.opacity="0",a.style.overflow="hidden",n.classList.remove("active"),e.appendChild(n)}var l})),e.addEventListener("click",(function(e){const t=e.target.closest(".accordion_question");if(!t)return;const r=t.closest(".accordion_accordion");if(!r)return;const n=r.querySelector(".accordion_answer"),o=t.querySelector(".accordion_icon-wrapper");if(!n||!o)return;r.classList.contains("active")?(n.style.maxHeight="0px",n.style.opacity="0",o.style.transform="rotate(0deg)",r.classList.remove("active")):(r.classList.add("active"),n.style.maxHeight=n.scrollHeight+"px",n.style.opacity="1",o.style.transform="rotate(45deg)")}))})(),document.querySelectorAll(".card-wrapper").forEach((e=>{const t=e.querySelector(".sqr-min-card-value"),r=e.querySelector(".sqr-max-card-value"),n=e.querySelector(".sqr-spacer");t&&r&&n&&t.textContent===r.textContent&&(n.style.display="none",r.style.display="none");const o=e.querySelector(".price-min-card-value"),l=e.querySelector(".price-max-card-value"),c=e.querySelector(".price-spacer"),a=e.querySelector(".price-max-dollar"),s=e.querySelector(".startingat");o&&l&&c&&o.textContent===l.textContent&&(c.style.display="none",l.style.display="none",a&&(a.style.display="none"),s&&(s.style.display="inline"))}))}));