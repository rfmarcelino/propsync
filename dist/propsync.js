document.addEventListener("DOMContentLoaded",(()=>{const e=[],t=[],r=[],addEventListenerWithCleanup=(t,r,n,l=!1)=>{t.addEventListener(r,n,l),e.push({element:t,event:r,handler:n,options:l})},setIntervalWithCleanup=(e,r)=>{const n=setInterval(e,r);return t.push(n),n},setTimeoutWithCleanup=(e,t)=>{const n=setTimeout(e,t);return r.push(n),n},cleanup=()=>{e.forEach((({element:e,event:t,handler:r,options:n})=>{e.removeEventListener(t,r,n)})),e.length=0,t.forEach((e=>clearInterval(e))),t.length=0,r.forEach((e=>clearTimeout(e))),r.length=0},formatNumber=e=>null==e||isNaN(e)?"":Math.round(e).toLocaleString(),parseVal=(e,t,r=!1)=>{const n=e.querySelector(t);if(!n||!n.textContent)return null;const l=n.textContent.trim().replace(/[^0-9.-]+/g,"");if(""===l||"-"===l)return null;const o=r?parseFloat(l):parseInt(l,10);return isNaN(o)?null:o},markPriceContainerAsSoldOut=e=>{if(!e)return;const t=e.querySelector(".price-min-card-value"),r=e.querySelector(".price-max-card-value");[e.querySelector(".price-min-dollar"),e.querySelector(".price-max-dollar"),e.querySelector(".price-spacer"),e.querySelector(".w-condition-invisible"),e.querySelector(".startingat"),r].forEach((e=>{e&&(e.style.display="none")})),t&&(t.textContent="Sold Out",t.style.display="")},processAvailabilityWrapper=e=>{if(!e)return;const t=e.querySelector(".availability-wrapper");if(!t)return;const r=t.querySelector(".available-items"),n=t.querySelector(".available-text"),l=t.querySelector(".available-sold-out");if(!r)return;const o=parseInt(r.textContent.trim(),10);isNaN(o)||(0===o?(r.style.display="none",n&&(n.style.display="none"),l&&(l.style.display="")):o>9?(r.textContent="9+",r.style.display="",n&&(n.style.display=""),l&&(l.style.display="none")):(r.style.display="",n&&(n.style.display=""),l&&(l.style.display="none")))};document.querySelectorAll("[applylink]").forEach((function(e){const t=e.getAttribute("applylink");t&&e.setAttribute("href",t)}));[".price-min",".price-max",".price-min-card-value",".price-max-card-value"].forEach((e=>{document.querySelectorAll(e).forEach((t=>{if(t.textContent.includes("$")||t.textContent.includes(","))return;const r=parseVal(t.parentElement,e);null!==r&&r>=0&&(t.textContent=formatNumber(r))}))})),[".sqr-min",".sqr-max",".sqr-min-card-value",".sqr-max-card-value"].forEach((e=>{document.querySelectorAll(e).forEach((t=>{const r=parseVal(t.parentElement,e);null!==r&&r>=0&&(t.textContent=formatNumber(r))}))})),(()=>{const e=document.querySelector(".sqr-min-card-value"),t=document.querySelector(".sqr-max-card-value"),r=document.querySelector(".sqr-spacer");e&&t&&r&&e.textContent===t.textContent&&(r.style.display="none",t.style.display="none");const n=document.querySelector(".price-min-card-value"),l=document.querySelector(".price-max-card-value"),o=document.querySelector(".price-spacer"),a=document.querySelector(".startingat"),c=document.querySelector(".price-min-dollar"),s=document.querySelector(".price-max-dollar");if(n&&o){const e=n.textContent.trim(),t=l?l.textContent.trim():null;t&&e!==t?(a&&(a.style.display="none"),o.style.display="inline",l&&(l.style.display="inline"),s&&(s.style.display="inline"),c&&(c.style.display="inline")):(o.style.display="none",l&&(l.style.display="none"),s&&(s.style.display="none"),a&&(a.style.display="inline"),c&&(c.style.display="inline"))}const i=document.querySelector(".floorplan-slider");if(!i)return;const u=i.querySelector(".w-dyn-items"),d=i.querySelectorAll(".w-dyn-item"),y=i.querySelector(".slider-arrow-left_small"),m=i.querySelector(".slider-arrow-right_small");if(!(u&&d.length&&y&&m))return;let p,q=0;const h=d.length,moveSlide=e=>{q="right"===e?(q+1)%h:(q-1+h)%h,(e=>{q=e;const t=100/h*-q;u.style.transform=`translateX(${t}%)`})(q),resetAutoSlide()},startAutoSlide=()=>{p=setIntervalWithCleanup((()=>moveSlide("right")),2e3)},resetAutoSlide=()=>{clearInterval(p),startAutoSlide()};u.style.display="flex",u.style.transition="transform 0.5s ease-in-out",u.style.width=100*h+"%",d.forEach((e=>{e.style.flex="1",e.style.width=100/h+"%"})),startAutoSlide(),addEventListenerWithCleanup(y,"click",(()=>moveSlide("left"))),addEventListenerWithCleanup(m,"click",(()=>moveSlide("right")))})(),(()=>{const e=document.querySelectorAll(".card-wrapper"),t=document.querySelector(".button-filter"),r=document.querySelector(".button-reset"),n=[".card-wrapper",".button-filter",".button-reset",".bedroom-wrapper",'.bedroom-wrapper input[type="checkbox"]',".price-range",".sqr-range",'[fs-cmsfilter-element="results-count"]',".items-summary",".items-count",".results-count",".bedroom-value",".bedroom-card-value",".price-min-card-value",".price-max-card-value",".sqr-min-card-value",".sqr-max-card-value",".price-min",".price-max",".sqr-min",".sqr-max",".price-min-handler",".price-max-handler",".price-range-bar",".sqr-min-handler",".sqr-max-handler",".sqr-range-bar"],l=[],o=[];n.forEach((e=>{document.querySelector(e)?l.push(e):o.push(e)}));const a=o.filter((e=>".button-filter"!==e));if(l.length>=2&&a.length>0&&(console.warn("🔍 PropSync Filter Diagnostics:"),console.warn(`   Found ${l.length}/${n.length} required classes`),console.warn("   ❌ Missing required classes:"),a.forEach((e=>console.warn(`      - ${e}`)))),!e.length)return;e.length;const c=document.querySelectorAll(".bedroom-wrapper"),s=document.querySelectorAll('.bedroom-wrapper input[type="checkbox"]'),i=document.querySelector(".price-range"),u=document.querySelector(".sqr-range"),d=document.querySelector('[fs-cmsfilter-element="results-count"]'),y=document.querySelector(".items-summary"),m=y?.querySelector(".items-count"),p=y?.querySelector(".results-count"),q=!t;let h=!1,f=1/0,x=-1/0,S=1/0,v=-1/0;const g=new Set,C=[];e.forEach((e=>{const t=parseVal(e,".bedroom-card-value"),r=parseVal(e,".price-min-card-value"),n=parseVal(e,".price-max-card-value"),l=parseVal(e,".sqr-min-card-value"),o=parseVal(e,".sqr-max-card-value");if(null!==r&&r<0||null!==n&&n<0){const t=e.querySelector(".price-range");markPriceContainerAsSoldOut(t||e),processAvailabilityWrapper(e)}const a={element:e,bed:t,priceMin:r,priceMax:n,sqrMin:l,sqrMax:o};C.push(a),null!==a.bed&&g.add(a.bed),null!==a.priceMin&&(f=Math.min(f,a.priceMin)),null!==a.priceMax&&(x=Math.max(x,a.priceMax)),null!==a.sqrMin&&(S=Math.min(S,a.sqrMin)),null!==a.sqrMax&&(v=Math.max(v,a.sqrMax)),processAvailabilityWrapper(e)})),f===1/0&&(f=0),(x===-1/0||x<f)&&(x=Math.max(1e3,f)),S===1/0&&(S=0),(v===-1/0||v<S)&&(v=Math.max(2e3,S));const setupRangeSlider=(e,t,r)=>{if(!t)return;const n=t.querySelector(`.${e}-min-handler`),l=t.querySelector(`.${e}-max-handler`),o=t.querySelector(`.${e}-range-bar`),a=t.querySelector(`.${e}-min`),c=t.querySelector(`.${e}-max`),s=n?.closest(".filters1_rangeslider2-track, .rangeslider_track");if(!(n&&l&&o&&a&&c&&s))return;let i,u,d,y,m,p,f=!1,x=!1;const updateSliderVisuals=()=>{const e=parseFloat(n.style.left)||0,s=parseFloat(l.style.left)||100;o.style.left=`${e}%`,o.style.width=s-e+"%";const i=parseFloat(t.dataset.min),u=parseFloat(t.dataset.max);if(!isNaN(i)&&!isNaN(u)){const t=i+e/100*(u-i),n=i+s/100*(u-i);a.textContent=r(t),c.textContent=r(n)}},onDragStart=(e,r)=>{if(h)return;h=!0,e.preventDefault();const l=r===n;if(f=l,x=!l,m=parseFloat(t.dataset.min),p=parseFloat(t.dataset.max),isNaN(m)||isNaN(p))return;i=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX,u=parseFloat(r.style.left)||(l?0:100);const o=s.getBoundingClientRect();d=o.width,y=o.left,d<=0||(document.addEventListener("mousemove",onDragging),document.addEventListener("touchmove",onDragging,{passive:!1}),document.addEventListener("mouseup",onDragEnd),document.addEventListener("touchend",onDragEnd))},onDragging=e=>{if(!f&&!x)return;e.type.startsWith("touch")&&e.preventDefault();const t=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX;let r=u+(t-i)/d*100;r=Math.max(0,Math.min(100,r));const o=parseFloat(f?l.style.left:n.style.left)||(f?100:0);f?(r=Math.min(r,o),n.style.left=`${r}%`):(r=Math.max(r,o),l.style.left=`${r}%`),updateSliderVisuals()},onDragEnd=()=>{(f||x)&&(h=!1,f=!1,x=!1,document.removeEventListener("mousemove",onDragging),document.removeEventListener("touchmove",onDragging),document.removeEventListener("mouseup",onDragEnd),document.removeEventListener("touchend",onDragEnd),q&&setTimeoutWithCleanup((()=>b()),50))};addEventListenerWithCleanup(n,"mousedown",(e=>onDragStart(e,n))),addEventListenerWithCleanup(n,"touchstart",(e=>onDragStart(e,n)),{passive:!0}),addEventListenerWithCleanup(l,"mousedown",(e=>onDragStart(e,l))),addEventListenerWithCleanup(l,"touchstart",(e=>onDragStart(e,l)),{passive:!0}),updateSliderVisuals()};if(i){const e=i.querySelector(".price-min"),t=i.querySelector(".price-max");if(e&&t){e.textContent=formatNumber(f),t.textContent=formatNumber(x),i.dataset.min=f,i.dataset.max=x;const r=i.querySelector(".price-min-handler"),n=i.querySelector(".price-max-handler"),l=i.querySelector(".price-range-bar");r&&(r.style.left="0%"),n&&(n.style.left="100%"),l&&(l.style.left="0%",l.style.width="100%")}setupRangeSlider("price",i,formatNumber)}if(u){const e=u.querySelector(".sqr-min"),t=u.querySelector(".sqr-max");if(e&&t){e.textContent=formatNumber(S),t.textContent=formatNumber(v),u.dataset.min=S,u.dataset.max=v;const r=u.querySelector(".sqr-min-handler"),n=u.querySelector(".sqr-max-handler"),l=u.querySelector(".sqr-range-bar");r&&(r.style.left="0%"),n&&(n.style.left="100%"),l&&(l.style.left="0%",l.style.width="100%")}setupRangeSlider("sqr",u,formatNumber)}c.forEach((e=>{const t=e.querySelector(".bedroom-value"),r=t?parseInt(t.textContent.trim(),10):NaN;e.style.display=!isNaN(r)&&g.has(r)?"":"none"}));const b=((e,t)=>{let r;return function(...n){clearTimeout(r),r=setTimeoutWithCleanup((()=>{clearTimeout(r),e(...n)}),t)}})((()=>{const e=Array.from(s).filter((e=>e.checked)).map((e=>{const t=e.closest(".bedroom-wrapper"),r=t?.querySelector(".bedroom-value");return r?parseInt(r.textContent.trim(),10):NaN})).filter((e=>!isNaN(e))),t=i&&parseFloat(i.querySelector(".price-min")?.textContent.replace(/[^0-9.]+/g,""))||f,r=i&&parseFloat(i.querySelector(".price-max")?.textContent.replace(/[^0-9.]+/g,""))||x,n=u&&parseFloat(u.querySelector(".sqr-min")?.textContent.replace(/[^0-9.]+/g,""))||S,l=u&&parseFloat(u.querySelector(".sqr-max")?.textContent.replace(/[^0-9.]+/g,""))||v;let o=0;C.forEach((a=>{let c=!0;e.length>0&&(null===a.bed||!e.includes(a.bed))&&(c=!1),c&&null!==a.priceMax&&null!==a.priceMin&&(a.priceMax<t||a.priceMin>r)&&(c=!1),c&&null!==a.sqrMax&&null!==a.sqrMin&&(a.sqrMax<n||a.sqrMin>l)&&(c=!1),a.element.style.display=c?"":"none",c&&o++})),d&&(d.textContent=o),m&&(m.textContent=o),p&&(p.textContent=C.length)}),300);t&&addEventListenerWithCleanup(t,"click",(e=>{e.preventDefault(),b()})),r&&addEventListenerWithCleanup(r,"click",(e=>{e.preventDefault(),(()=>{if(s.forEach((e=>e.checked=!1)),i){const e=i.querySelector(".price-min-handler"),t=i.querySelector(".price-max-handler"),r=i.querySelector(".price-range-bar"),n=i.querySelector(".price-min"),l=i.querySelector(".price-max");e&&(e.style.left="0%"),t&&(t.style.left="100%"),r&&(r.style.left="0%",r.style.width="100%"),n&&(n.textContent=formatNumber(f)),l&&(l.textContent=formatNumber(x))}if(u){const e=u.querySelector(".sqr-min-handler"),t=u.querySelector(".sqr-max-handler"),r=u.querySelector(".sqr-range-bar"),n=u.querySelector(".sqr-min"),l=u.querySelector(".sqr-max");e&&(e.style.left="0%"),t&&(t.style.left="100%"),r&&(r.style.left="0%",r.style.width="100%"),n&&(n.textContent=formatNumber(S)),l&&(l.textContent=formatNumber(v))}C.forEach((e=>{e.element.style.display=""})),d&&(d.textContent=C.length),m&&(m.textContent=C.length),p&&(p.textContent=C.length)})()})),q&&s.forEach((e=>{addEventListenerWithCleanup(e,"change",(()=>{b()}))})),d&&(d.textContent=C.length),m&&(m.textContent=C.length),p&&(p.textContent=C.length)})(),(()=>{const e=document.querySelector(".accordion_list"),t=document.querySelector(".accordion_accordion"),r=Array.from(document.querySelectorAll(".accordion_component .card-wrapper"));if(!e||!t||!r.length)return;const n={};r.forEach((e=>{const t=e.querySelector(".bedroom-card-value"),r=e.querySelector(".price-min-card-value"),l=e.querySelector(".price-max-card-value");if(t&&r){const o=t.textContent.trim(),a=parseInt(r.textContent.trim().replace(/[^0-9.-]+/g,""),10),c=l?parseInt(l.textContent.trim().replace(/[^0-9.-]+/g,""),10):null;if(a<0||null!==c&&c<0){const t=e.querySelector(".price-range");markPriceContainerAsSoldOut(t||e)}processAvailabilityWrapper(e);const s=(e=>{const t=parseInt(e,10);return isNaN(t)?"Unknown":0===t?"Studio":1===t?"1 Bedroom":`${t} Bedroom`})(o),i=parseInt(o,10);if(isNaN(a))return;n[s]||(n[s]={cards:[],minPrice:1/0,numericBedValue:isNaN(i)?1/0:i}),n[s].cards.push(e),a>=0&&(n[s].minPrice=Math.min(n[s].minPrice,a))}}));const l=Object.keys(n).sort(((e,t)=>n[e].numericBedValue-n[t].numericBedValue));e.innerHTML="",l.forEach((r=>{const l=n[r];if(l.cards.length>0){const n=t.cloneNode(!0),a=n.querySelector(".accordion_question"),c=n.querySelector(".accordion_answer"),s=n.querySelector(".floorplan-accordian-text"),i=n.querySelector(".floorplan-collection-list");if(!(a&&c&&s&&i))return;let u;u=l.minPrice===1/0?`${r} -- Number of ${l.cards.length} Floorplans`:`${r} Starting at ${o=l.minPrice,null==o||isNaN(o)?"":"$"+formatNumber(o)} -- Number of ${l.cards.length} Floorplans`,s.textContent=u;const d=n.querySelector(".bedroom-text");d&&(d.textContent=r),i.innerHTML="",l.cards.forEach((e=>{i.appendChild(e)})),c.style.maxHeight="0px",c.style.opacity="0",c.style.overflow="hidden",n.classList.remove("active"),e.appendChild(n)}var o})),addEventListenerWithCleanup(e,"click",(function(e){const t=e.target.closest(".accordion_question");if(!t)return;const r=t.closest(".accordion_accordion");if(!r)return;const n=r.querySelector(".accordion_answer"),l=t.querySelector(".accordion_icon-wrapper");if(!n||!l)return;r.classList.contains("active")?(n.style.maxHeight="0px",n.style.opacity="0",l.style.transform="rotate(0deg)",r.classList.remove("active")):(r.classList.add("active"),n.style.maxHeight=n.scrollHeight+"px",n.style.opacity="1",l.style.transform="rotate(45deg)")}))})(),document.querySelectorAll(".card-wrapper").forEach((e=>{const t=e.querySelector(".price-min-card-value"),r=e.querySelector(".price-max-card-value"),n=e.querySelector(".price-range");if(t&&r){const l=parseInt(t.textContent.trim().replace(/[^0-9.-]+/g,""),10),o=parseInt(r.textContent.trim().replace(/[^0-9.-]+/g,""),10);if(l<0||o<0)return markPriceContainerAsSoldOut(n||e),void processAvailabilityWrapper(e)}const l=e.querySelector(".sqr-min-card-value"),o=e.querySelector(".sqr-max-card-value"),a=e.querySelector(".sqr-spacer");l&&o&&a&&l.textContent===o.textContent&&(a.style.display="none",o.style.display="none");const c=e.querySelector(".price-spacer"),s=e.querySelector(".price-max-dollar"),i=e.querySelector(".startingat"),u=e.querySelector(".price-min-dollar");if(t&&c){const e=t.textContent.trim(),n=r?r.textContent.trim():null;n&&e!==n?(i&&(i.style.display="none"),c.style.display="inline",r&&(r.style.display="inline"),s&&(s.style.display="inline"),u&&(u.style.display="inline")):(c.style.display="none",r&&(r.style.display="none"),s&&(s.style.display="none"),i&&(i.style.display="inline"),u&&(u.style.display="inline"))}processAvailabilityWrapper(e)})),addEventListenerWithCleanup(window,"beforeunload",cleanup);let n=null;addEventListenerWithCleanup(document,"visibilitychange",(()=>{if(document.hidden)n&&(clearInterval(n),n=null);else{const e=document.querySelector(".floorplan-slider");if(e){const t=e.querySelector(".w-dyn-items"),r=e.querySelectorAll(".w-dyn-item");if(t&&r.length>0){n=setIntervalWithCleanup((()=>{const e=r.length;let n=0;const l=t.style.transform;if(l){const t=l.match(/translateX\(([-\d.]+)%\)/);t&&(n=Math.round(-parseFloat(t[1])/(100/e)))}n=(n+1)%e;const o=100/e*-n;t.style.transform=`translateX(${o}%)`}),2e3)}}}})),window.propSyncCleanup=cleanup}));