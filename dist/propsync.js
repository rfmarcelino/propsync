document.addEventListener("DOMContentLoaded",(()=>{const e=[],t=[],r=[],addEventListenerWithCleanup=(t,r,n,l=!1)=>{t.addEventListener(r,n,l),e.push({element:t,event:r,handler:n,options:l})},setIntervalWithCleanup=(e,r)=>{const n=setInterval(e,r);return t.push(n),n},setTimeoutWithCleanup=(e,t)=>{const n=setTimeout(e,t);return r.push(n),n},cleanup=()=>{e.forEach((({element:e,event:t,handler:r,options:n})=>{e.removeEventListener(t,r,n)})),e.length=0,t.forEach((e=>clearInterval(e))),t.length=0,r.forEach((e=>clearTimeout(e))),r.length=0},formatNumber=e=>null==e||isNaN(e)?"":Math.round(e).toLocaleString(),parseVal=(e,t,r=!1)=>{const n=e.querySelector(t);if(!n||!n.textContent)return null;const l=n.textContent.trim().replace(/[^0-9.-]+/g,"");if(""===l||"-"===l)return null;const o=r?parseFloat(l):parseInt(l,10);return isNaN(o)?null:o},markPriceContainerAsSoldOut=e=>{if(!e)return;const t=e.querySelector(".price-min-card-value"),r=e.querySelector(".price-max-card-value");[e.querySelector(".price-min-dollar"),e.querySelector(".price-max-dollar"),e.querySelector(".price-spacer"),e.querySelector(".w-condition-invisible"),e.querySelector(".startingat"),r].forEach((e=>{e&&(e.style.display="none")})),t&&(t.textContent="Sold Out",t.style.display="")},processAvailabilityWrapper=e=>{if(!e)return;const t=e.querySelector(".availability-wrapper");if(!t)return;const r=t.querySelector(".available-items"),n=t.querySelector(".available-text"),l=t.querySelector(".available-sold-out");if(!r)return;const o=parseInt(r.textContent.trim(),10);isNaN(o)||(0===o?(r.style.display="none",n&&(n.style.display="none"),l&&(l.style.display="")):o>9?(r.textContent="9+",r.style.display="",n&&(n.style.display=""),l&&(l.style.display="none")):(r.style.display="",n&&(n.style.display=""),l&&(l.style.display="none")))};document.querySelectorAll("[applylink]").forEach((function(e){const t=e.getAttribute("applylink");t&&e.setAttribute("href",t)}));[".price-min",".price-max",".price-min-card-value",".price-max-card-value"].forEach((e=>{document.querySelectorAll(e).forEach((t=>{if(t.textContent.includes("$")||t.textContent.includes(","))return;const r=parseVal(t.parentElement,e);null!==r&&r>=0&&(t.textContent=formatNumber(r))}))})),[".sqr-min",".sqr-max",".sqr-min-card-value",".sqr-max-card-value"].forEach((e=>{document.querySelectorAll(e).forEach((t=>{const r=parseVal(t.parentElement,e);null!==r&&r>=0&&(t.textContent=formatNumber(r))}))})),(()=>{const e=document.querySelector(".sqr-min-card-value"),t=document.querySelector(".sqr-max-card-value"),r=document.querySelector(".sqr-spacer");e&&t&&r&&e.textContent===t.textContent&&(r.style.display="none",t.style.display="none");const n=document.querySelector(".price-min-card-value"),l=document.querySelector(".price-max-card-value"),o=document.querySelector(".price-spacer"),a=document.querySelector(".startingat"),c=document.querySelector(".price-min-dollar"),s=document.querySelector(".price-max-dollar");if(n&&o){const e=n.textContent.trim(),t=l?l.textContent.trim():null;t&&e!==t?(a&&(a.style.display="none"),o.style.display="inline",l&&(l.style.display="inline"),s&&(s.style.display="inline"),c&&(c.style.display="inline")):(o.style.display="none",l&&(l.style.display="none"),s&&(s.style.display="none"),a&&(a.style.display="inline"),c&&(c.style.display="inline"))}const i=document.querySelector(".floorplan-slider");if(!i)return;const u=i.querySelector(".w-dyn-items"),d=i.querySelectorAll(".w-dyn-item"),y=i.querySelector(".slider-arrow-left_small"),m=i.querySelector(".slider-arrow-right_small");if(!(u&&d.length&&y&&m))return;let p,q=0;const f=d.length,moveSlide=e=>{q="right"===e?(q+1)%f:(q-1+f)%f,(e=>{q=e;const t=100/f*-q;u.style.transform=`translateX(${t}%)`})(q),resetAutoSlide()},startAutoSlide=()=>{p=setIntervalWithCleanup((()=>moveSlide("right")),2e3)},resetAutoSlide=()=>{clearInterval(p),startAutoSlide()};u.style.display="flex",u.style.transition="transform 0.5s ease-in-out",u.style.width=100*f+"%",d.forEach((e=>{e.style.flex="1",e.style.width=100/f+"%"})),startAutoSlide(),addEventListenerWithCleanup(y,"click",(()=>moveSlide("left"))),addEventListenerWithCleanup(m,"click",(()=>moveSlide("right")))})(),(()=>{const e=document.querySelectorAll(".card-wrapper"),t=document.querySelector(".button-filter"),r=document.querySelector(".button-reset"),n=[".card-wrapper",".button-filter",".button-reset",".bedroom-wrapper",'.bedroom-wrapper input[type="checkbox"]',".price-range",".sqr-range",'[fs-cmsfilter-element="results-count"]',".items-summary",".items-count",".results-count",".bedroom-value",".bedroom-card-value",".price-min-card-value",".price-max-card-value",".sqr-min-card-value",".sqr-max-card-value",".price-min",".price-max",".sqr-min",".sqr-max",".price-min-handler",".price-max-handler",".price-range-bar",".sqr-min-handler",".sqr-max-handler",".sqr-range-bar"],l=[],o=[];n.forEach((e=>{document.querySelector(e)?l.push(e):o.push(e)}));const a=o.filter((e=>".button-filter"!==e));if(l.length>=2&&a.length>0&&(console.warn("ðŸ” PropSync Filter Diagnostics:"),console.warn(`   Found ${l.length}/${n.length} required classes`),console.warn("   âŒ Missing required classes:"),a.forEach((e=>console.warn(`      - ${e}`)))),!e.length)return;e.length;const c=document.querySelector(".propsync-tabs"),s=document.querySelectorAll(".bedroom-wrapper"),i=document.querySelectorAll('.bedroom-wrapper input[type="checkbox"]'),u=document.querySelector(".price-range"),d=document.querySelector(".sqr-range"),y=document.querySelector('[fs-cmsfilter-element="results-count"]'),m=document.querySelector(".items-summary"),p=m?.querySelector(".items-count"),q=m?.querySelector(".results-count"),f=!t;let h=!1,x=1/0,S=-1/0,v=1/0,g=-1/0;const C=new Set,b=[];if(e.forEach((e=>{const t=parseVal(e,".bedroom-card-value"),r=parseVal(e,".price-min-card-value"),n=parseVal(e,".price-max-card-value"),l=parseVal(e,".sqr-min-card-value"),o=parseVal(e,".sqr-max-card-value");if(null!==r&&r<0||null!==n&&n<0){const t=e.querySelector(".price-range");markPriceContainerAsSoldOut(t||e),processAvailabilityWrapper(e)}const a={element:e,bed:t,priceMin:r,priceMax:n,sqrMin:l,sqrMax:o};b.push(a),null!==a.bed&&C.add(a.bed),null!==a.priceMin&&(x=Math.min(x,a.priceMin)),null!==a.priceMax&&(S=Math.max(S,a.priceMax)),null!==a.sqrMin&&(v=Math.min(v,a.sqrMin)),null!==a.sqrMax&&(g=Math.max(g,a.sqrMax)),processAvailabilityWrapper(e)})),x===1/0&&(x=0),(S===-1/0||S<x)&&(S=Math.max(1e3,x)),v===1/0&&(v=0),(g===-1/0||g<v)&&(g=Math.max(2e3,v)),c){const getBedroomLabel=e=>0===e?"Studio":1===e?"1 Bedroom":`${e} Bedroom`,e=Array.from(C).sort(((e,t)=>e-t));c.innerHTML="";const t=document.createElement("div");t.className="tab__link active",t.setAttribute("data-bedroom-filter","all");const r=document.createElement("div");r.className="button-text",r.textContent="View All",t.appendChild(r),c.appendChild(t),e.forEach((e=>{const t=document.createElement("div");t.className="tab__link",t.setAttribute("data-bedroom-filter",e.toString());const r=document.createElement("div");r.className="button-text",r.textContent=getBedroomLabel(e),t.appendChild(r),c.appendChild(t)}));const applyTabFilter=e=>{let t=0;b.forEach((r=>{let n=!1;if("all"===e)n=!0;else{const t=parseInt(e,10);n=r.bed===t}r.element.style.display=n?"":"none",n&&t++})),y&&(y.textContent=t),p&&(p.textContent=t),q&&(q.textContent=b.length)};return c.querySelectorAll(".tab__link").forEach((e=>{addEventListenerWithCleanup(e,"click",(t=>{t.preventDefault(),c.querySelectorAll(".tab__link").forEach((e=>e.classList.remove("active"))),e.classList.add("active");const r=e.getAttribute("data-bedroom-filter");applyTabFilter(r)}))})),void applyTabFilter("all")}const setupRangeSlider=(e,t,r)=>{if(!t)return;const n=t.querySelector(`.${e}-min-handler`),l=t.querySelector(`.${e}-max-handler`),o=t.querySelector(`.${e}-range-bar`),a=t.querySelector(`.${e}-min`),c=t.querySelector(`.${e}-max`),s=n?.closest(".filters1_rangeslider2-track, .rangeslider_track");if(!(n&&l&&o&&a&&c&&s))return;let i,u,d,y,m,p,q=!1,x=!1;const updateSliderVisuals=()=>{const e=parseFloat(n.style.left)||0,s=parseFloat(l.style.left)||100;o.style.left=`${e}%`,o.style.width=s-e+"%";const i=parseFloat(t.dataset.min),u=parseFloat(t.dataset.max);if(!isNaN(i)&&!isNaN(u)){const t=i+e/100*(u-i),n=i+s/100*(u-i);a.textContent=r(t),c.textContent=r(n)}},onDragStart=(e,r)=>{if(h)return;h=!0,e.preventDefault();const l=r===n;if(q=l,x=!l,m=parseFloat(t.dataset.min),p=parseFloat(t.dataset.max),isNaN(m)||isNaN(p))return;i=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX,u=parseFloat(r.style.left)||(l?0:100);const o=s.getBoundingClientRect();d=o.width,y=o.left,d<=0||(document.addEventListener("mousemove",onDragging),document.addEventListener("touchmove",onDragging,{passive:!1}),document.addEventListener("mouseup",onDragEnd),document.addEventListener("touchend",onDragEnd))},onDragging=e=>{if(!q&&!x)return;e.type.startsWith("touch")&&e.preventDefault();const t=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX;let r=u+(t-i)/d*100;r=Math.max(0,Math.min(100,r));const o=parseFloat(q?l.style.left:n.style.left)||(q?100:0);q?(r=Math.min(r,o),n.style.left=`${r}%`):(r=Math.max(r,o),l.style.left=`${r}%`),updateSliderVisuals()},onDragEnd=()=>{(q||x)&&(h=!1,q=!1,x=!1,document.removeEventListener("mousemove",onDragging),document.removeEventListener("touchmove",onDragging),document.removeEventListener("mouseup",onDragEnd),document.removeEventListener("touchend",onDragEnd),f&&setTimeoutWithCleanup((()=>E()),50))};addEventListenerWithCleanup(n,"mousedown",(e=>onDragStart(e,n))),addEventListenerWithCleanup(n,"touchstart",(e=>onDragStart(e,n)),{passive:!0}),addEventListenerWithCleanup(l,"mousedown",(e=>onDragStart(e,l))),addEventListenerWithCleanup(l,"touchstart",(e=>onDragStart(e,l)),{passive:!0}),updateSliderVisuals()};if(u){const e=u.querySelector(".price-min"),t=u.querySelector(".price-max");if(e&&t){e.textContent=formatNumber(x),t.textContent=formatNumber(S),u.dataset.min=x,u.dataset.max=S;const r=u.querySelector(".price-min-handler"),n=u.querySelector(".price-max-handler"),l=u.querySelector(".price-range-bar");r&&(r.style.left="0%"),n&&(n.style.left="100%"),l&&(l.style.left="0%",l.style.width="100%")}setupRangeSlider("price",u,formatNumber)}if(d){const e=d.querySelector(".sqr-min"),t=d.querySelector(".sqr-max");if(e&&t){e.textContent=formatNumber(v),t.textContent=formatNumber(g),d.dataset.min=v,d.dataset.max=g;const r=d.querySelector(".sqr-min-handler"),n=d.querySelector(".sqr-max-handler"),l=d.querySelector(".sqr-range-bar");r&&(r.style.left="0%"),n&&(n.style.left="100%"),l&&(l.style.left="0%",l.style.width="100%")}setupRangeSlider("sqr",d,formatNumber)}s.forEach((e=>{const t=e.querySelector(".bedroom-value"),r=t?parseInt(t.textContent.trim(),10):NaN;e.style.display=!isNaN(r)&&C.has(r)?"":"none"}));const E=((e,t)=>{let r;return function(...n){clearTimeout(r),r=setTimeoutWithCleanup((()=>{clearTimeout(r),e(...n)}),t)}})((()=>{const e=Array.from(i).filter((e=>e.checked)).map((e=>{const t=e.closest(".bedroom-wrapper"),r=t?.querySelector(".bedroom-value");return r?parseInt(r.textContent.trim(),10):NaN})).filter((e=>!isNaN(e))),t=u&&parseFloat(u.querySelector(".price-min")?.textContent.replace(/[^0-9.]+/g,""))||x,r=u&&parseFloat(u.querySelector(".price-max")?.textContent.replace(/[^0-9.]+/g,""))||S,n=d&&parseFloat(d.querySelector(".sqr-min")?.textContent.replace(/[^0-9.]+/g,""))||v,l=d&&parseFloat(d.querySelector(".sqr-max")?.textContent.replace(/[^0-9.]+/g,""))||g;let o=0;b.forEach((a=>{let c=!0;e.length>0&&(null===a.bed||!e.includes(a.bed))&&(c=!1),c&&null!==a.priceMax&&null!==a.priceMin&&(a.priceMax<t||a.priceMin>r)&&(c=!1),c&&null!==a.sqrMax&&null!==a.sqrMin&&(a.sqrMax<n||a.sqrMin>l)&&(c=!1),a.element.style.display=c?"":"none",c&&o++})),y&&(y.textContent=o),p&&(p.textContent=o),q&&(q.textContent=b.length)}),300);t&&addEventListenerWithCleanup(t,"click",(e=>{e.preventDefault(),E()})),r&&addEventListenerWithCleanup(r,"click",(e=>{e.preventDefault(),(()=>{if(i.forEach((e=>e.checked=!1)),u){const e=u.querySelector(".price-min-handler"),t=u.querySelector(".price-max-handler"),r=u.querySelector(".price-range-bar"),n=u.querySelector(".price-min"),l=u.querySelector(".price-max");e&&(e.style.left="0%"),t&&(t.style.left="100%"),r&&(r.style.left="0%",r.style.width="100%"),n&&(n.textContent=formatNumber(x)),l&&(l.textContent=formatNumber(S))}if(d){const e=d.querySelector(".sqr-min-handler"),t=d.querySelector(".sqr-max-handler"),r=d.querySelector(".sqr-range-bar"),n=d.querySelector(".sqr-min"),l=d.querySelector(".sqr-max");e&&(e.style.left="0%"),t&&(t.style.left="100%"),r&&(r.style.left="0%",r.style.width="100%"),n&&(n.textContent=formatNumber(v)),l&&(l.textContent=formatNumber(g))}b.forEach((e=>{e.element.style.display=""})),y&&(y.textContent=b.length),p&&(p.textContent=b.length),q&&(q.textContent=b.length)})()})),f&&i.forEach((e=>{addEventListenerWithCleanup(e,"change",(()=>{E()}))})),y&&(y.textContent=b.length),p&&(p.textContent=b.length),q&&(q.textContent=b.length)})(),document.querySelectorAll(".card-wrapper").forEach((e=>{const t=e.querySelector(".bedroom-card-value");if(!t)return;const r=t.textContent.trim();if(0===parseInt(r.replace(/[^0-9.-]+/g,""),10)){t.textContent="Studio";const e=t.parentElement;e&&Array.from(e.children).forEach((e=>{e!==t&&e.textContent.includes("Bedroom")&&(e.style.display="none")}))}})),(()=>{const e=document.querySelector(".accordion_list"),t=document.querySelector(".accordion_accordion"),r=Array.from(document.querySelectorAll(".accordion_component .card-wrapper"));if(!e||!t||!r.length)return;const n={};r.forEach((e=>{const t=e.querySelector(".bedroom-card-value"),r=e.querySelector(".price-min-card-value"),l=e.querySelector(".price-max-card-value");if(t&&r){const o=t.textContent.trim(),a=parseInt(r.textContent.trim().replace(/[^0-9.-]+/g,""),10),c=l?parseInt(l.textContent.trim().replace(/[^0-9.-]+/g,""),10):null;if(a<0||null!==c&&c<0){const t=e.querySelector(".price-range");markPriceContainerAsSoldOut(t||e)}processAvailabilityWrapper(e);const s=(e=>{const t=parseInt(e,10);return isNaN(t)?"Unknown":0===t?"Studio":1===t?"1 Bedroom":`${t} Bedroom`})(o),i=parseInt(o,10);if(isNaN(a))return;n[s]||(n[s]={cards:[],minPrice:1/0,numericBedValue:isNaN(i)?1/0:i}),n[s].cards.push(e),a>=0&&(n[s].minPrice=Math.min(n[s].minPrice,a))}}));const l=Object.keys(n).sort(((e,t)=>n[e].numericBedValue-n[t].numericBedValue));e.innerHTML="",l.forEach((r=>{const l=n[r];if(l.cards.length>0){const n=t.cloneNode(!0),a=n.querySelector(".accordion_question"),c=n.querySelector(".accordion_answer"),s=n.querySelector(".floorplan-accordian-text"),i=n.querySelector(".floorplan-collection-list");if(!(a&&c&&s&&i))return;let u;u=l.minPrice===1/0?`${r} -- Number of ${l.cards.length} Floorplans`:`${r} Starting at ${o=l.minPrice,null==o||isNaN(o)?"":"$"+formatNumber(o)} -- Number of ${l.cards.length} Floorplans`,s.textContent=u;const d=n.querySelector(".bedroom-text");d&&(d.textContent=r),i.innerHTML="",l.cards.forEach((e=>{i.appendChild(e)})),c.style.maxHeight="0px",c.style.opacity="0",c.style.overflow="hidden",n.classList.remove("active"),e.appendChild(n)}var o})),addEventListenerWithCleanup(e,"click",(function(e){const t=e.target.closest(".accordion_question");if(!t)return;const r=t.closest(".accordion_accordion");if(!r)return;const n=r.querySelector(".accordion_answer"),l=t.querySelector(".accordion_icon-wrapper");if(!n||!l)return;r.classList.contains("active")?(n.style.maxHeight="0px",n.style.opacity="0",l.style.transform="rotate(0deg)",r.classList.remove("active")):(r.classList.add("active"),n.style.maxHeight=n.scrollHeight+"px",n.style.opacity="1",l.style.transform="rotate(45deg)")}))})(),document.querySelectorAll(".card-wrapper").forEach((e=>{const t=e.querySelector(".price-min-card-value"),r=e.querySelector(".price-max-card-value"),n=e.querySelector(".price-range");if(t&&r){const l=parseInt(t.textContent.trim().replace(/[^0-9.-]+/g,""),10),o=parseInt(r.textContent.trim().replace(/[^0-9.-]+/g,""),10);if(l<0||o<0)return markPriceContainerAsSoldOut(n||e),void processAvailabilityWrapper(e)}const l=e.querySelector(".sqr-min-card-value"),o=e.querySelector(".sqr-max-card-value"),a=e.querySelector(".sqr-spacer");l&&o&&a&&l.textContent===o.textContent&&(a.style.display="none",o.style.display="none");const c=e.querySelector(".price-spacer"),s=e.querySelector(".price-max-dollar"),i=e.querySelector(".startingat"),u=e.querySelector(".price-min-dollar");if(t&&c){const e=t.textContent.trim(),n=r?r.textContent.trim():null;n&&e!==n?(i&&(i.style.display="none"),c.style.display="inline",r&&(r.style.display="inline"),s&&(s.style.display="inline"),u&&(u.style.display="inline")):(c.style.display="none",r&&(r.style.display="none"),s&&(s.style.display="none"),i&&(i.style.display="inline"),u&&(u.style.display="inline"))}processAvailabilityWrapper(e)})),addEventListenerWithCleanup(window,"beforeunload",cleanup);let n=null;addEventListenerWithCleanup(document,"visibilitychange",(()=>{if(document.hidden)n&&(clearInterval(n),n=null);else{const e=document.querySelector(".floorplan-slider");if(e){const t=e.querySelector(".w-dyn-items"),r=e.querySelectorAll(".w-dyn-item");if(t&&r.length>0){n=setIntervalWithCleanup((()=>{const e=r.length;let n=0;const l=t.style.transform;if(l){const t=l.match(/translateX\(([-\d.]+)%\)/);t&&(n=Math.round(-parseFloat(t[1])/(100/e)))}n=(n+1)%e;const o=100/e*-n;t.style.transform=`translateX(${o}%)`}),2e3)}}}})),window.propSyncCleanup=cleanup}));