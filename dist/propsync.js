document.addEventListener("DOMContentLoaded",(()=>{const formatNumber=e=>null==e||isNaN(e)?"":Math.round(e).toLocaleString(),parseVal=(e,t,r=!1)=>{const n=e.querySelector(t);if(!n||!n.textContent)return null;const l=n.textContent.trim().replace(/[^0-9.-]+/g,"");if(""===l||"-"===l)return null;const o=r?parseFloat(l):parseInt(l,10);return isNaN(o)?null:o},markPriceContainerAsSoldOut=e=>{if(!e)return;const t=e.querySelector(".price-min-card-value"),r=e.querySelector(".price-max-card-value");[e.querySelector(".price-min-dollar"),e.querySelector(".price-max-dollar"),e.querySelector(".price-spacer"),e.querySelector(".w-condition-invisible"),e.querySelector(".startingat"),r].forEach((e=>{e&&(e.style.display="none")})),t&&(t.textContent="Sold Out",t.style.display="")},processAvailabilityWrapper=e=>{if(!e)return;const t=e.querySelector(".availability-wrapper");if(!t)return;const r=t.querySelector(".available-items"),n=t.querySelector(".available-text"),l=t.querySelector(".available-sold-out");if(!r)return;const o=parseInt(r.textContent.trim(),10);isNaN(o)||(0===o?(r.style.display="none",n&&(n.style.display="none"),l&&(l.style.display="")):o>9?(r.textContent="9+",r.style.display="",n&&(n.style.display=""),l&&(l.style.display="none")):(r.style.display="",n&&(n.style.display=""),l&&(l.style.display="none")))};document.querySelectorAll("[applylink]").forEach((function(e){const t=e.getAttribute("applylink");t&&e.setAttribute("href",t)}));[".price-min",".price-max",".price-min-card-value",".price-max-card-value"].forEach((e=>{document.querySelectorAll(e).forEach((t=>{if(t.textContent.includes("$")||t.textContent.includes(","))return;const r=parseVal(t.parentElement,e);null!==r&&r>=0&&(t.textContent=formatNumber(r))}))})),[".sqr-min",".sqr-max",".sqr-min-card-value",".sqr-max-card-value"].forEach((e=>{document.querySelectorAll(e).forEach((t=>{const r=parseVal(t.parentElement,e);null!==r&&r>=0&&(t.textContent=formatNumber(r))}))})),(()=>{const e=document.querySelector(".sqr-min-card-value"),t=document.querySelector(".sqr-max-card-value"),r=document.querySelector(".sqr-spacer");e&&t&&r&&e.textContent===t.textContent&&(r.style.display="none",t.style.display="none");const n=document.querySelector(".price-min-card-value"),l=document.querySelector(".price-max-card-value"),o=document.querySelector(".price-spacer"),c=document.querySelector(".startingat");n&&l&&o&&n.textContent===l.textContent&&(o.style.display="none",l.style.display="none",c&&(c.style.display="inline"));const a=document.querySelector(".floorplan-slider");if(!a)return;const s=a.querySelector(".w-dyn-items"),i=a.querySelectorAll(".w-dyn-item"),u=a.querySelector(".slider-arrow-left_small"),d=a.querySelector(".slider-arrow-right_small");if(!(s&&i.length&&u&&d))return;let y,m=0;const p=i.length,moveSlide=e=>{m="right"===e?(m+1)%p:(m-1+p)%p,(e=>{m=e;const t=100/p*-m;s.style.transform=`translateX(${t}%)`})(m),resetAutoSlide()},startAutoSlide=()=>{y=setInterval((()=>moveSlide("right")),2e3)},resetAutoSlide=()=>{clearInterval(y),startAutoSlide()};s.style.display="flex",s.style.transition="transform 0.5s ease-in-out",s.style.width=100*p+"%",i.forEach((e=>{e.style.flex="1",e.style.width=100/p+"%"})),startAutoSlide(),u.addEventListener("click",(()=>moveSlide("left"))),d.addEventListener("click",(()=>moveSlide("right")))})(),(()=>{const e=document.querySelectorAll(".card-wrapper"),t=document.querySelector(".button-filter"),r=document.querySelector(".button-reset");if(!e.length||!t||!r)return;e.length;const n=document.querySelectorAll(".bedroom-wrapper"),l=document.querySelectorAll('.bedroom-wrapper input[type="checkbox"]'),o=document.querySelector(".price-range"),c=document.querySelector(".sqr-range"),a=document.querySelector('[fs-cmsfilter-element="results-count"]'),s=document.querySelector(".items-summary"),i=s?.querySelector(".items-count"),u=s?.querySelector(".results-count");let d=!1,y=1/0,m=-1/0,p=1/0,q=-1/0;const x=new Set,f=[];e.forEach((e=>{const t=parseVal(e,".bedroom-card-value"),r=parseVal(e,".price-min-card-value"),n=parseVal(e,".price-max-card-value"),l=parseVal(e,".sqr-min-card-value"),o=parseVal(e,".sqr-max-card-value");if(null!==r&&r<0||null!==n&&n<0){const t=e.querySelector(".price-range");markPriceContainerAsSoldOut(t||e),processAvailabilityWrapper(e)}const c={element:e,bed:t,priceMin:r,priceMax:n,sqrMin:l,sqrMax:o};f.push(c),null!==c.bed&&x.add(c.bed),null!==c.priceMin&&(y=Math.min(y,c.priceMin)),null!==c.priceMax&&(m=Math.max(m,c.priceMax)),null!==c.sqrMin&&(p=Math.min(p,c.sqrMin)),null!==c.sqrMax&&(q=Math.max(q,c.sqrMax)),processAvailabilityWrapper(e)})),y===1/0&&(y=0),(m===-1/0||m<y)&&(m=Math.max(1e3,y)),p===1/0&&(p=0),(q===-1/0||q<p)&&(q=Math.max(2e3,p));const setupRangeSlider=(e,t,r)=>{if(!t)return;const n=t.querySelector(`.${e}-min-handler`),l=t.querySelector(`.${e}-max-handler`),o=t.querySelector(`.${e}-range-bar`),c=t.querySelector(`.${e}-min`),a=t.querySelector(`.${e}-max`),s=n?.closest(".filters1_rangeslider2-track, .rangeslider_track");if(!(n&&l&&o&&c&&a&&s))return;let i,u,y,m,p,q,x=!1,f=!1;const updateSliderVisuals=()=>{const e=parseFloat(n.style.left)||0,s=parseFloat(l.style.left)||100;o.style.left=`${e}%`,o.style.width=s-e+"%";const i=parseFloat(t.dataset.min),u=parseFloat(t.dataset.max);if(!isNaN(i)&&!isNaN(u)){const t=i+e/100*(u-i),n=i+s/100*(u-i);c.textContent=r(t),a.textContent=r(n)}},onDragStart=(e,r)=>{if(d)return;d=!0,e.preventDefault();const l=r===n;if(x=l,f=!l,p=parseFloat(t.dataset.min),q=parseFloat(t.dataset.max),isNaN(p)||isNaN(q))return;i=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX,u=parseFloat(r.style.left)||(l?0:100);const o=s.getBoundingClientRect();y=o.width,m=o.left,y<=0||(document.addEventListener("mousemove",onDragging),document.addEventListener("touchmove",onDragging,{passive:!1}),document.addEventListener("mouseup",onDragEnd),document.addEventListener("touchend",onDragEnd))},onDragging=e=>{if(!x&&!f)return;e.type.startsWith("touch")&&e.preventDefault();const t=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX;let r=u+(t-i)/y*100;r=Math.max(0,Math.min(100,r));const o=parseFloat(x?l.style.left:n.style.left)||(x?100:0);x?(r=Math.min(r,o),n.style.left=`${r}%`):(r=Math.max(r,o),l.style.left=`${r}%`),updateSliderVisuals()},onDragEnd=()=>{(x||f)&&(d=!1,x=!1,f=!1,document.removeEventListener("mousemove",onDragging),document.removeEventListener("touchmove",onDragging),document.removeEventListener("mouseup",onDragEnd),document.removeEventListener("touchend",onDragEnd))};n.addEventListener("mousedown",(e=>onDragStart(e,n))),n.addEventListener("touchstart",(e=>onDragStart(e,n)),{passive:!0}),l.addEventListener("mousedown",(e=>onDragStart(e,l))),l.addEventListener("touchstart",(e=>onDragStart(e,l)),{passive:!0}),updateSliderVisuals()};if(o){const e=o.querySelector(".price-min"),t=o.querySelector(".price-max");if(e&&t){e.textContent=formatNumber(y),t.textContent=formatNumber(m),o.dataset.min=y,o.dataset.max=m;const r=o.querySelector(".price-min-handler"),n=o.querySelector(".price-max-handler"),l=o.querySelector(".price-range-bar");r&&(r.style.left="0%"),n&&(n.style.left="100%"),l&&(l.style.left="0%",l.style.width="100%")}setupRangeSlider("price",o,formatNumber)}if(c){const e=c.querySelector(".sqr-min"),t=c.querySelector(".sqr-max");if(e&&t){e.textContent=formatNumber(p),t.textContent=formatNumber(q),c.dataset.min=p,c.dataset.max=q;const r=c.querySelector(".sqr-min-handler"),n=c.querySelector(".sqr-max-handler"),l=c.querySelector(".sqr-range-bar");r&&(r.style.left="0%"),n&&(n.style.left="100%"),l&&(l.style.left="0%",l.style.width="100%")}setupRangeSlider("sqr",c,formatNumber)}n.forEach((e=>{const t=e.querySelector(".bedroom-value"),r=t?parseInt(t.textContent.trim(),10):NaN;e.style.display=!isNaN(r)&&x.has(r)?"":"none"}));t.addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=Array.from(l).filter((e=>e.checked)).map((e=>{const t=e.closest(".bedroom-wrapper"),r=t?.querySelector(".bedroom-value");return r?parseInt(r.textContent.trim(),10):NaN})).filter((e=>!isNaN(e))),t=o&&parseFloat(o.querySelector(".price-min")?.textContent.replace(/[^0-9.]+/g,""))||y,r=o&&parseFloat(o.querySelector(".price-max")?.textContent.replace(/[^0-9.]+/g,""))||m,n=c&&parseFloat(c.querySelector(".sqr-min")?.textContent.replace(/[^0-9.]+/g,""))||p,s=c&&parseFloat(c.querySelector(".sqr-max")?.textContent.replace(/[^0-9.]+/g,""))||q;let d=0;f.forEach((l=>{let o=!0;e.length>0&&(null===l.bed||!e.includes(l.bed))&&(o=!1),o&&null!==l.priceMax&&null!==l.priceMin&&(l.priceMax<t||l.priceMin>r)&&(o=!1),o&&null!==l.sqrMax&&null!==l.sqrMin&&(l.sqrMax<n||l.sqrMin>s)&&(o=!1),l.element.style.display=o?"":"none",o&&d++})),a&&(a.textContent=d),i&&(i.textContent=d),u&&(u.textContent=f.length)})()})),r.addEventListener("click",(e=>{e.preventDefault(),(()=>{if(l.forEach((e=>e.checked=!1)),o){const e=o.querySelector(".price-min-handler"),t=o.querySelector(".price-max-handler"),r=o.querySelector(".price-range-bar"),n=o.querySelector(".price-min"),l=o.querySelector(".price-max");e&&(e.style.left="0%"),t&&(t.style.left="100%"),r&&(r.style.left="0%",r.style.width="100%"),n&&(n.textContent=formatNumber(y)),l&&(l.textContent=formatNumber(m))}if(c){const e=c.querySelector(".sqr-min-handler"),t=c.querySelector(".sqr-max-handler"),r=c.querySelector(".sqr-range-bar"),n=c.querySelector(".sqr-min"),l=c.querySelector(".sqr-max");e&&(e.style.left="0%"),t&&(t.style.left="100%"),r&&(r.style.left="0%",r.style.width="100%"),n&&(n.textContent=formatNumber(p)),l&&(l.textContent=formatNumber(q))}f.forEach((e=>{e.element.style.display=""})),a&&(a.textContent=f.length),i&&(i.textContent=f.length),u&&(u.textContent=f.length)})()})),a&&(a.textContent=f.length),i&&(i.textContent=f.length),u&&(u.textContent=f.length)})(),(()=>{const e=document.querySelector(".accordion_list"),t=document.querySelector(".accordion_accordion"),r=Array.from(document.querySelectorAll(".accordion_component .card-wrapper"));if(!e||!t||!r.length)return;const n={};r.forEach((e=>{const t=e.querySelector(".bedroom-card-value"),r=e.querySelector(".price-min-card-value"),l=e.querySelector(".price-max-card-value");if(t&&r){const o=t.textContent.trim(),c=parseInt(r.textContent.trim().replace(/[^0-9.-]+/g,""),10),a=l?parseInt(l.textContent.trim().replace(/[^0-9.-]+/g,""),10):null;if(c<0||null!==a&&a<0){const t=e.querySelector(".price-range");markPriceContainerAsSoldOut(t||e)}processAvailabilityWrapper(e);const s=(e=>{const t=parseInt(e,10);return isNaN(t)?"Unknown":0===t?"Studio":1===t?"1 Bedroom":`${t} Bedroom`})(o),i=parseInt(o,10);if(isNaN(c))return;n[s]||(n[s]={cards:[],minPrice:1/0,numericBedValue:isNaN(i)?1/0:i}),n[s].cards.push(e),c>=0&&(n[s].minPrice=Math.min(n[s].minPrice,c))}}));const l=Object.keys(n).sort(((e,t)=>n[e].numericBedValue-n[t].numericBedValue));e.innerHTML="",l.forEach((r=>{const l=n[r];if(l.cards.length>0){const n=t.cloneNode(!0),c=n.querySelector(".accordion_question"),a=n.querySelector(".accordion_answer"),s=n.querySelector(".floorplan-accordian-text"),i=n.querySelector(".floorplan-collection-list");if(!(c&&a&&s&&i))return;let u;u=l.minPrice===1/0?`${r} -- Number of ${l.cards.length} Floorplans`:`${r} Starting at ${o=l.minPrice,null==o||isNaN(o)?"":"$"+formatNumber(o)} -- Number of ${l.cards.length} Floorplans`,s.textContent=u;const d=n.querySelector(".bedroom-text");d&&(d.textContent=r),i.innerHTML="",l.cards.forEach((e=>{i.appendChild(e)})),a.style.maxHeight="0px",a.style.opacity="0",a.style.overflow="hidden",n.classList.remove("active"),e.appendChild(n)}var o})),e.addEventListener("click",(function(e){const t=e.target.closest(".accordion_question");if(!t)return;const r=t.closest(".accordion_accordion");if(!r)return;const n=r.querySelector(".accordion_answer"),l=t.querySelector(".accordion_icon-wrapper");if(!n||!l)return;r.classList.contains("active")?(n.style.maxHeight="0px",n.style.opacity="0",l.style.transform="rotate(0deg)",r.classList.remove("active")):(r.classList.add("active"),n.style.maxHeight=n.scrollHeight+"px",n.style.opacity="1",l.style.transform="rotate(45deg)")}))})(),document.querySelectorAll(".card-wrapper").forEach((e=>{const t=e.querySelector(".price-min-card-value"),r=e.querySelector(".price-max-card-value"),n=e.querySelector(".price-range");if(t&&r){const l=parseInt(t.textContent.trim().replace(/[^0-9.-]+/g,""),10),o=parseInt(r.textContent.trim().replace(/[^0-9.-]+/g,""),10);if(l<0||o<0)return markPriceContainerAsSoldOut(n||e),void processAvailabilityWrapper(e)}const l=e.querySelector(".sqr-min-card-value"),o=e.querySelector(".sqr-max-card-value"),c=e.querySelector(".sqr-spacer");l&&o&&c&&l.textContent===o.textContent&&(c.style.display="none",o.style.display="none");const a=e.querySelector(".price-spacer"),s=e.querySelector(".price-max-dollar"),i=e.querySelector(".startingat");t&&r&&a&&t.textContent===r.textContent&&(a.style.display="none",r.style.display="none",s&&(s.style.display="none"),i&&(i.style.display="inline")),processAvailabilityWrapper(e)}))}));